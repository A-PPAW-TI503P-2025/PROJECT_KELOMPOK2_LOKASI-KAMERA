@startuml
<<<<<<< HEAD

title Flowchart Sistem Peminjaman (Final Update: Dashboard & Akses Cepat)

start

:Buka Aplikasi Website;

'--- ALUR REGISTER ---
if (Sudah Punya Akun?) then (Tidak)
  :Menu Register;
  repeat
    :Input Name, NIM, Email, Password;
    if (Validasi: Email/NIM ada?) then (Ya/Error)
      :Alert "Akun sudah terdaftar";
    else (Tidak)
      break
    endif
  repeat while
  :Simpan Data Akun;
else (Ya)
endif

'--- ALUR LOGIN ---
:Menu Login;
repeat
  :Input Email & Password;
  :Cek Kredensial (Validasi);
  if (Kredensial Valid?) then (Ya)
    break
  else (Tidak)
    :Alert "Email/Password Salah";
  endif
repeat while

:Ambil Data User & Role;

'--- PERCABANGAN ROLE ---
if (Apakah Role == Admin?) then (Ya)
  
  '=== DASHBOARD ADMIN ===
  partition "Dashboard Admin" {
    :Masuk Dashboard Admin;
    repeat
      :Pilih Menu (Navbar);
      
      if (Pilih Dashboard) then (Ya)
        :Tampilkan Halaman Dashboard;
        :Pilih Akses Cepat;
        :Tambah Buku Baru dan Cek Validasi Peminjaman;

      elseif (Menu == Kelola Buku?) then (Ya)
        :Tampilkan Daftar Buku;
        :Lakukan CRUD (Tambah/Edit/Hapus);
        :Simpan Buku;
      
      elseif (Menu == Laporan & Validasi?) then (Ya)
        :Tampilkan Daftar Laporan Peminjaman;
        
      elseif (Menu == Logout?) then (Ya)
        break
      endif
    repeat while (Kembali ke Dashboard)
  }

else (Tidak / Member)

  '=== DASHBOARD MAHASISWA ===
  partition "Dashboard Mahasiswa" {
    :Masuk Dashboard Mahasiswa;
    repeat
      :Pilih Menu (Navbar);
      
      if (Menu == Daftar Buku?) then (Ya)
        :Melihat Daftar Buku;
        :Pilih Buku untuk Peminjaman;
        :Klik Tombol "Pinjam";
        :Sistem Buka Kamera;
        :Konfirmasi Peminjaman Lokasi dan Kamera;
        :User Ambil Foto Selfie dengan Buku dan Lokasi;
        :Update Status "Dipinjam";

      elseif (Menu == Peminjaman Saya) then (Ya)
        :Melihat Daftar Peminjaman Aktif;
        :Klik Tombol "Proses Penegembalian";
        :Sistem Buka Kamera;
        :User Ambil Foto Selfie dengan Buku dan Lokasi;
        :Konfirmasi Pengembalian Lokasi dan Kamera;
        :Kembali ke halaman peminjaman saya;
      
      elseif (Menu == Logout?) then (Ya)
        break
      endif
      
    repeat while (Kembali ke Menu)
  }

endif

'--- ENDING ---
:Logout Akun;
stop
=======
left to right direction
skinparam packageStyle rectangle

actor "Mahasiswa" as user
actor "Admin Pustakawan" as admin

rectangle "Sistem Peminjaman Buku Perpustakaan" {
    ' Use Case Mahasiswa
    usecase "Registrasi User" as UC_Reg_User
    usecase "Login User" as UC_Login_User
    usecase "Kembalikan Buku" as UC_Return
    usecase "Logout" as UC_Logout_User
    usecase "Peminjaman Saya" as UC_Borrow
    usecase "Daftar Buku" as UC_Search


    ' Use Case Admin
    usecase "Registrasi Admin" as UC_Reg_Admin
    usecase "Login Admin" as UC_Login_Admin
    usecase "Logout" as UC_Logout_Admin
    usecase "Laporan & Validasi" as UC_Report
    usecase "Kelola Buku" as UC_Manage
    usecase "Dashboard" as UC_Dashboard

    ' Use Case Teknis
    usecase "Validasi Foto & Lokasi" as UC_Tech
}

' --- Relasi Peminjam ---
user --> UC_Reg_User
UC_Reg_User ..> UC_Login_User : <<include>>
UC_Login_User ..> UC_Borrow : <<include>>
UC_Login_User ..> UC_Search : <<include>>
UC_Login_User ..> UC_Logout_User : <<include>>
UC_Borrow ..> UC_Return : <<extend>>

' --- Relasi Validasi ---
UC_Return ..> UC_Tech : <<include>>
UC_Borrow ..> UC_Tech : <<include>>

' --- Relasi Admin ---
admin --> UC_Reg_Admin
UC_Reg_Admin ..> UC_Login_Admin : <<include>>
UC_Login_Admin ..> UC_Logout_Admin : <<include>>
UC_Login_Admin ..> UC_Report : <<include>>
UC_Login_Admin ..> UC_Manage : <<include>>
UC_Login_Admin ..> UC_Dashboard : <<include>>
>>>>>>> 5a3f2714d14f5166d45d6654e4c2402eb08c00df

@enduml